<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="stylesheet" href="/static/mujstyl.css"/>
<title>Úvodní stránka</title>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
    <div id="top"></div>
    <div class="adjancent">
        <img src="/static/img/logo.png" class="logo">
        <h1 style="font-size: 35px;">Registrace</h1>
    </div>
    <br>

    <form id="form1" action="/registrace" method="post">
    <label for="nick">Jmeno:</label>
    <input type="text" id="nick" name="nick" class="form_element" required pattern="[A-Za-z0-9]{2,20}" title="Povoleno 2 až 20 znaků, jen čísla a písmena bez mezer" />

    <br>

    <label for="prijmeni">Příjmení:</label>
    <input type="text" id="prijmeni" name="prijmeni" class="form_element" required pattern="[A-Za-z0-9]{2,20}" title="Povoleno 2 až 20 znaků, jen čísla a písmena bez mezer" />


    <br>

    <label for="trida">Třída osoby:</label>
    <input type="text" id="trida" name="trida" class="form_element" required pattern="[AEC][1234][ABC]?" title="Povoleno 2-3 znaky (A, E, C)(1, 2, 3, 4)(A, B, C) nebo prázdný" />

    <br>

    <label>Zda-li osoba umí plavat:</label>
    <input type="radio" id="ano" name="je_plavec" value="1" class="form_element_radio" required>
    <label for="ano" >Ano</label>
    <input type="radio" id="ne" name="je_plavec" value="0" class="form_element_radio" required>
    <label for="ne">Ne</label>

    <br>

    <label for="kanoe_kamarad">S kým by osoba chtěla být na lodi:</label>
    <input type="text" id="kanoe_kamarad" name="kanoe_kamarad" class="form_element" />

    <br>

    <br>
    <button type="submit" class="orange_button">Odeslat</button>
    <a href="javascript:history.go(-1)"><button type="button" class="orange_button">Storno</button></a>
    </form>


    <script type="text/javascript">
    $("#form1").submit(function() {
        var nick = $("#nick").val();
        var je_plavec = $("input[name='je_plavec']:checked").val();
        var kanoe_kamarad = $("#kanoe_kamarad").val();

        // Validation checks
        if (je_plavec !== '1') {
            alert("Chyba: Je potřeba být plavcem.");
            return false; // Prevent form submission
        }

        if (!nick.match(/^[A-Za-z0-9]{2,20}$/)) {
            alert("Chyba: Nick není platný.");
            return false; // Prevent form submission
        }

        if (!prijmeni.match(/^[A-Za-z0-9]{2,20}$/)) {
            alert("Chyba: Příjmení není platné.");
            return false; // Prevent form submission
        }

        if (!trida.match(/^[AEC][1234][ABC]?$/)) {
            alert("Chyba: Třída není platná.");
            return false; // Prevent form submission
        }

        if (kanoe_kamarad && !kanoe_kamarad.match(/^[A-Za-z0-9]{2,20}$/)) {
            alert("Chyba: Kamarád na kanoe není platný.");
            return false; // Prevent form submission
        }

        return false; // Prevent form submission until AJAX check is complete
    });
    </script>

</body>
</html>